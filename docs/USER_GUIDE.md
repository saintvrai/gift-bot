# Руководство для пользователей

Этот файл описывает поведение бота простым языком: что делает каждая команда, как устроена регистрация, рассылки и блокировки.

## Кому доступна команда

- **Обычные пользователи**: `/start`, `/help`, `/chat`, `/login`
- **Администраторы**: все команды обычных пользователей + `/message`, `/block`, `/unblock`, `/admin_add`, `/admin_remove`

## Регистрация

1) Пользователь пишет `/start`.
2) Бот приветствует и предлагает начать с команды `/login`.
3) Пользователь вводит секретное слово.
4) Бот запрашивает дату рождения (ДД.ММ.ГГГГ) и сохраняет пользователя.

## Рассылка (/message)

1) Администратор вводит `/message`.
2) Бот просит текст рассылки.
3) После текста бот показывает клавиатуру с пользователями, которых можно исключить из рассылки.
4) Администратор выбирает пользователей и нажимает «Отправить».

## Блокировка (/block)

1) Администратор вводит `/block`.
2) Бот показывает список пользователей с кнопками.
3) Администратор выбирает нескольких и нажимает «Заблокировать».
4) Бот подтверждает и показывает список заблокированных.

### Что означает блокировка

- Бот не принимает сообщения от заблокированных пользователей.
- Заблокированные не получают рассылки.
- По заблокированным не приходят уведомления о дне рождения.

## Разблокировка (/unblock)

1) Администратор вводит `/unblock`.
2) Бот показывает список заблокированных пользователей.
3) Администратор выбирает нескольких и нажимает «Разблокировать».

## Назначение админа (/admin_add)

1) Администратор вводит `/admin_add`.
2) Бот показывает список пользователей.
3) Выбранный пользователь получает роль администратора.

## Снятие админа (/admin_remove)

1) Администратор вводит `/admin_remove`.
2) Бот показывает список администраторов.
3) Выбранный пользователь теряет права администратора.

## Обновление никнеймов и имён

Бот автоматически проверяет и обновляет `username`, `first_name`, `last_name`:

- 1 раз в сутки (около 04:00 по Europe/Moscow)

Это нужно, если пользователь поменял ник/имя в Telegram.

## Уведомления о днях рождения

Бот ежедневно уведомляет администраторов о пользователях, у которых день рождения через 3 дня.
Если отправка не удалась, уведомление будет повторено на следующем запуске. Повторных дублей в один день нет.

## Антиспам

Ограничение: **10 запросов в минуту** на chat_id.  
При превышении бот отправляет одно предупреждение и далее игнорирует сообщения до конца минуты.
